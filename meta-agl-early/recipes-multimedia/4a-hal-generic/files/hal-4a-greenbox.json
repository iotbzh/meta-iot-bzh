{
    "$schema": "http://iot.bzh/download/public/schema/json/ctl-schema.json",
    "metadata": {
        "uid": "/dev/snd/by-id/usb-Microchip-SMSC_OS81210_0200-0000000C-02",
        "version": "0.9",
        "api": "4a-hal-rcar-m3kf-unicens",
        "require": [ "alsacore", "UNICENS", "smixer" ],
        "info": "4a hal for Rcar M3 device when plugged on Kingfisher board, with Unicens sound card",
        "author": "Jonathan Aillet, Stephane Desneux, Thierry Bultel",
        "date": "2018-06-15"
    },
    "resources": [
        {
            "uid": "hal-bt",
            "info": "Bluetooth hal plugin to get A2DP bluetooth device as an input by tweaking softmixer configuration",
            "params": {
                "channels": 2,
                "zone": "front-seats"
            },
            "libs": ["hal-bt.ctlso"]
        },
        {
            "uid": "hal-unicens",
            "info": "UNICENS HAL plugin",
            "spath": "./package/lib/plugins:./package/var:./lib/plugins:./var:/usr/libexec/agl/4a-hal",
            "libs": ["hal-unicens.ctlso"]
        }
    ],
    "events": [
        {
            "uid": "UNICENS/node-availibility",
            "action": "plugin://hal-unicens#Events"
        }
    ],
    "halmap": [
        {
            "uid": "agl-master-playback-volume",
            "info": "Sets master playback volume",
            "alsa": {
                "name": "Master Playback Volume",
                "value": 90,
                "create":
                {
                    "type": "INTEGER",
                    "count": 1,
                    "minval": 0,
                    "maxval": 100,
                    "step": 1
                }
            },
            "action": "plugin://hal-unicens#MasterVol"
        }
    ],
    "halmixer": {
        "uid": "rcar-m3-unicens",
        "mixerapi": "smixer",
        "prefix": "m3kf-ucs",
        "ramps": [
            {
                "uid": "ramp-very-fast",
                "delay": 50,
                "up": 6,
                "down": 10
            },
            {
                "uid": "ramp-fast",
                "delay": 50,
                "up": 2,
                "down": 10
            },
            {
                "uid": "ramp-normal",
                "delay": 50,
                "up": 2,
                "down": 4
            },
            {
                "uid": "ramp-slow",
                "delay": 50,
                "up": 2,
                "down": 2
            },
            {
                "uid": "ramp-very-slow",
                "delay": 100,
                "up": 1,
                "down": 1
            }
        ],
        "playbacks" : {
            "uid": "UNICENS",
            "cardid": "hw:ep016ch",
            "params": {
                "rate": 48000,
                "format": "S16_LE"
            },
            "sink": {
                "channels": [
                    {
                        "uid": "front-right",
                        "port": 0
                    },
                    {
                        "uid": "front-left",
                        "port": 1
                    },
                    {
                        "uid": "middle-right",
                        "port": 2
                    },
                    {
                        "uid": "middle-left",
                        "port": 3
                    },
                    {
                        "uid": "back-right",
                        "port": 4
                    },
                    {
                        "uid": "back-left",
                        "port": 5
                    }
                ]
            }
        },
        "captures": [ 
        {
            "uid": "RCAR-M3",
            "path": "/dev/snd/by-path/platform-sound@1",
            "params": {
                "rate": 48000
            },
            "source": {
                "controls": {
                    "volume": {
                        "name": "DVC In Capture Volume"
                    },
                    "mute": {
                        "name": "DVC In Mute Switch"
                    }
                },
                "channels": [
                    {
                        "uid": "mic-right",
                        "port": 0
                    },
                    {
                        "uid": "mic-left",
                        "port": 1
                    }
                ]
            }
        } ,
        {
            "uid": "radio",
            "path": "/dev/snd/by-path/platform-sound@2",
            "params": {
                "channels": 2
            },
            "source": {
                "channels": [
                    {
                        "uid": "radio-right",
                        "port": 0
                    },
                    {
                        "uid": "radio-left",
                        "port": 1
                    }
                ]
            }
        }
        ],
        "zones": [
            {
                "uid": "full-stereo",
                "sink": [
                    {
                        "target": "front-right",
                        "channel": 0
                    },
                    {
                        "target": "front-left",
                        "channel": 1
                    },
                    {
                        "target": "middle-right",
                        "channel": 0
                    },
                    {
                        "target": "middle-left",
                        "channel": 1
                    },
                    {
                        "target": "back-right",
                        "channel": 0
                    },
                    {
                        "target": "back-left",
                        "channel": 1
                    }
                ]
            },
            {
                "uid": "front-seats",
                "sink": [
                    {
                        "target": "front-right",
                        "channel": 0
                    },
                    {
                        "target": "front-left",
                        "channel": 1
                    }
                ]
            },
            {
                "uid": "middle-seats",
                "sink": [
                    {
                        "target": "middle-right",
                        "channel": 0
                    },
                    {
                        "target": "middle-left",
                        "channel": 1
                    }
                ]
            },
            {
                "uid": "back-seats",
                "sink": [
                    {
                        "target": "back-right",
                        "channel": 0
                    },
                    {
                        "target": "back-left",
                        "channel": 1
                    }
                ]
            }
        ],
        "streams": [
            {
                "uid": "multimedia",
                "verb": "multimedia",
                "zone": "full-stereo",
                "volume": 70,
                "mute": false,
                "params": {
                    "rate": 48000,
                    "format": "S16_LE"
                }
            },
            {
                "uid": "navigation",
                "verb": "navigation",
                "zone": "front-seats",
                "volume": 70,
                "mute": false,
                "params": {
                    "rate": 48000,
                    "format": "S16_LE"
                }
            },
            {
                "uid": "emergency",
                "verb": "emergency",
                "zone": "front-seats",
                "volume": 70,
                "mute": false,
                "params": {
                    "rate": 48000,
                    "format": "S16_LE"
                }
            },
            {
                "uid": "radio_stream",
                "verb": "radio_stream",
                "zone": "full-stereo",
                "source" : "radio",
                "volume": 80,
                "mute": true,
                "params": {
                    "rate" : 48000,
                    "format": "S16_LE",
                    "channels": 2
                }
            }
        ]
    }
}
